# Документирование

Документирование - это ещё одна тема, которая стоит всегда рядом с разработкой и влияет на неё. Но понятие достаточно обширное, чтобы его воспринимали неоднозначно. Взять хотя бы тот момент, что многие люди высказывают о том, что документация не нужна. И они отчасти правы, если уточняют, что под документацией, они подразумевают комментирование всех методов в коде, которые и так очевидны. Нужно ли комментировать очевидный код? Вероятно, что нет. А если он не очевидный, то это скорее повод его переписать, чем закрывать комментарием.

Но документацию можно понимать в более широков смысле. Для начала определим некоторые проблемы, которые связаны с документацией:

- bus factor. Это довольно популярный термин, который оценивают привязку кода к человеку. Бас фактор = n интерпретируется как "если завтра автобус собьет этих N людей, то разработка фичи/проекта/продукта встанет и уже будет невозможно продолжить". Разумеется, что увольнение любого человека, который отвечает за код, замедляет и усложняет разработку, если он успел сделать достаточно своего вклада, но это больше про то, что в проектах небольшое количество людей могу владеть всеми знаниями. И если эти люди внезапно исчезнут, то без их знаний проект будет тяжело поддерживать. Это одна из причин, почему тимлиды очень скептически относятся к предложениям сотрудников "давайте я просто возьму это таску и за пару ночей запилю, всё будет ок". Каждый элемент проекта, который будет реализован таким образом, будет висеть угрозой над тимлидом т.к. он не сможет поручить другому человеку пойти поправить это место. Это одно из тех мест, когда документация может исправить ситуацию. Если человек фиксирует свои знания в документации и по документации можно восстановить их и втянуться в проект, то его потеря уже не станет критической, а превратиться в замедление работы.
- Шаринг знаний. Документация решает не только проблемы потери человека, но ещё даёт возможность другим участника эти знания получать. Во время разработки часто приходится консультировать с другими людьми, чтобы лучше понимать как работает их часть кода, с которой нужно интегрироваться. Самым простым способом является обращение к человеку - позвонить или написать. Но такой подход требует временных затрат от людей. А достаточно часто получается так, что много знают люди у которых очень мало времени на то, чтобы об этом рассказывать. В этом разрезе документация становится FAQ'ом, который должен ответить на большую часть вопросов и сэкономить время.

Для документации существует ещё один атрибут, который определяет то, как её нужно писать. Это аудитория. Аудитория также определяет важность, нужность и структуру документации. До этого речь шла про документацию внутреннюю, для разработчиков или тестировщиков. Другая крайность - это документация для пользователей. Она не про технические детали или реализацию, а про то, как взять продукт и заставить его приносить профит. Пользователи должны знать о функционале, который им предоставляют, у них нет возможности задать вопросы разработчика напрямую (да и не сказать, что это удобно).

## Тулинг для документации

Документация, как и менеджмент задач, очень сильно зависят от тулинга и подхода. И тут также нет единоверного варианта. Рассмотрим несколько вариантов. Первый вариант, который приходит в голову - это документирование кода, а значит использование комментариев в коде. Один из важнейших его плюсов - документация находится рядом с кодом, её сразу видно и больше вероятность, что при изменении кода изменится и документация. Есть две проблемы. Первая, более решаемая - это доступ к документации не разработчикам. Как прочитать её не открывая IDE? Нужно будет прыгать между файлами с кодом, что не очень удобно. Решается это проблема специальными инструментами, которые умеют по комментариям в коде генерировать полноценные веб страницы с документацией. Вторая проблема менее решаемая - глобальные решения. Документируя классы и методы, можно рассказать про детали, но не про общую картину. Совершенно не ясно куда и как писать более глобальные моменты, которые затрагивают сразу много классов или даже модулей.

Когда документации в коде становится недостаточно, можно переходить к таким инструментам как гитхаб вики, медиа вики или конфлюенс и подобные:

- Гитхаб предоставляет функционал добавления вики с документацией прям в репозиторий. По факту, это ещё один гит репозиторий, который лежит рядом и содержит описание в маркдауне. Ввиду того, что это просто надстройка над маркдауном, она имеет очень мало инструментов для работы с файлами, как с базой знаний, но для небольших проектов этого может быть достаточно. Один из плюсов - это нахождение в том же репозитории, в максимальной близости.
- Медиавики - это движок, на котором создаются вики-подобные сервисы. Они содержат очень много функционала для разработки базы знаний, но являются куда более сложными в использовании и поддержке.
- Конлюенс - это переосмысление подходов к созданию базы знаний, попытка сделать всё те же вики сервисы, но иначе.

Отдельно стоит выделить readme файлы в репозиториях. Они играют очень важную роль т.к. являются точкой вхождения в репозиторий. Ридми файл хоть и не является достаточной документаций, но должен отвечать на ряд вопросов:

- кратко о том, что это за проект и какие проблемы он решает
- описание состояния проекта - на каком этапе он находится, какие есть дальнейшие планы
- гайд о том, как проект собрать и запустить для людей, которые впервые его видят

## Meeting notes

Разберём один важный источник информации, который не всегда попадает в базу знаний - митинги. На митингах очень часто генерируется много полезной информации, которая описывает проект. Митинг ноутс - это саммари, которое делают по итогам митинга. В ноутсах отображаются информация, которая была сгенерирована во время митинга, например:

- результаты обсуждения функционала и планы по его реализации
- уточнение требований и их более подробное итоговое описание
- рассказ о том, как реализован какой-то функционал, т.е. шаринг знаний, которые не были обнаружены в документации
- фиксирование плана действий/согласований кто и что будет делать

Зачем делать такие заметки? В первую очередь, они делаются для того, чтобы зафиксировать письменно какую-то информацию. Сказанную устно информацию можно очень быстро забыть или вспомнить немного не так, как было. Также такие заметки помогут людям, которые не присутствовали на митинге.

При написании ноутсов нужно начинать ещё до самого митинга, с агенды. Для митинга важно зафиксировать цель его существования, контекст. Из этого будет строится обсуждение. Во время самого митинга заметки фиксируются в отрыве от люде, которые говорят и слушают. Заметки должны быть самодостаточными и не предполагать, что они пишутся для какого-то определённого человека. Складывая такие заметки вместе с фичами, можно получить более полную картину о её реализации. Но заметки - это относительно "сырые данные". Если в них описан функционал фичи, то его можно переписать в более читаемый вид и добавить в документацию, чтобы не приходилось перечитывать заметки. Но если на это времени нет, то само существование заметок уже может упростить жизнь.

## Architecture decision record

Не менее сложным вопросов про документация является также "Что документировать?". Можно выделить много времени и покрыть документацией весь код, но это очень затратно и мало кто из разработчиков готов трать такую часть своего времени на документацию. Но в документации такая же проблема как и у тестов - они может устаревать и терять свою актуальность, если её не будут поддерживать. Может оказаться так, что проект полностью покрыли документацией, а за год разработки вещи сильно изменились, а документация противоречит реальности.

Но если всё же было принято решение документировать, то есть некоторые моменты, которые можно попробовать задокументировать помимо кода. Например, принятые решения. Architecture decision record (ADR) - это некое описание принятого технического решения. Очень часто приходится что-то обсуждать и думать как лучше сделать то или иное действие. Чтобы принять такое решение приходится прорабатывать много гипотез, анализировать текущее положение дел. Можно сказать, что ADR - это абстрактный шаблон для оформления принятых на митинге решений. К нему не нужно относится как к "нужно делать именно так", а скорее как к набору небольших моментов, которые лучше учесть при составлении заметки. Атрибуты ADR:

- Время. Важно понимать когда было принято решение. Оно могло быть принято давно и быть не актуальным. Оно могло быть принято перед релизом, а значит могло быть временным решением. Или наоборот могло быть принято недавно, чем показывать актуальность
- Статус. Описание ADR требует большого ресёрча иногда. Какие-то из ADR могут быть в стадии проработки. ADR может быть отправлен на повторную проработку и находиться в подвешенном состоянии. Среди этого всего стоит отдельно выделять те ADR, которые уже окончательно сформированы и готовы к шарингу.
- Контекст. Всё то, что предшествует обсуждению. Описание деталей, которые привели к проблеме/обсуждению, которые влияют на итоговое решение. Это значит, что перед тем, как обсуждать проблему и её решения, нужно проанализировать всё, что было до. Важно также добавить текущий контекст, что из происходящего влияет на решение. Например, фикс может казаться очевидным костыльным, хотя не сложно было сделать более правильный, но если его заапрувили в контексте минимизации переделок перед релизом, то это может быть оправдано.
- Решение. Разумеется, что самое главное - это само решение, которое было принято. Оно может быть любый, в том числе "решили обсудить через полгода". Даже такая формулировка даёт ответы на многие вопросы.
- Последствия. Обсуждая решение, команда должна отчётливо понимать какие последствия будут и эти последствия также имеет смысл документировать, чтобы понимать осознанно ли на них пошли. И чтобы можно было отличить от ситуации, когда какой-то момент просто не продумали и ситуация требует дополнительного согласования.
